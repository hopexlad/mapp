<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Campus Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; }
        #map { width: 100vw; height: 100vh; }

        /* Navigation Menu */
        .menu {
            position: absolute;
            left: -250px;
            top: 0;
            width: 250px;
            height: 100%;
            background: #2c3e50;
            color: white;
            transition: left 0.3s ease;
            padding: 15px;
            z-index: 1002;
        }

        .menu.open { left: 0; }

        .menu h2 { text-align: center; margin-bottom: 10px; }

        .menu .search-box {
            width: 100%;
            padding: 5px;
            border-radius: 5px;
            border: none;
            margin-bottom: 10px;
        }

        .menu button { width: 100%; margin: 5px 0; padding: 8px; cursor: pointer; border: none; }

        .menu-btn {
            position: absolute;
            left: 10px;
            top: 10px;
            background: green;
            color: white;
            padding: 10px;
            cursor: pointer;
            z-index: 1003;
            border: none;
            border-radius: 5px;
        }

        /* Floor Buttons */
        .floor-buttons {
            position: absolute;
            top: 10px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1003;
        }

        .floor-buttons button {
            padding: 10px;
            background: green;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }

        /* Chat Box */
        .chat-container {
            position: absolute;
            bottom: 20px;
            right: 20px;
            width: 300px;
            background: white;
            display: none;
            z-index: 1003;
            border-radius: 5px;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.3);
        }

        .chat-header {
            background: green;
            color: white;
            padding: 10px;
            cursor: pointer;
            text-align: center;
            border-radius: 5px 5px 0 0;
        }

        .chat-messages { padding: 10px; height: 300px; overflow-y: auto; }

        .chat-input { display: flex; border-top: 1px solid #ddd; }

        #chat-input { flex: 1; padding: 8px; border: none; }

        #send-button {
            padding: 8px;
            background: green;
            color: white;
            cursor: pointer;
            border: none;
        }
    </style>
</head>
<body>

    <!-- Side Menu -->
    <button class="menu-btn" onclick="toggleMenu()">â˜° Menu</button>
    <div class="menu" id="menu">
        <h2>Campus Map</h2>
        <input type="text" id="search-box" class="search-box" placeholder="Search rooms...">
        <button onclick="searchRoom()">Search</button>
        <h3>Classes</h3>
        <button onclick="highlightRoom('CG114')">CG114</button>
        <button onclick="highlightRoom('CG113')">CG113</button>
        <button onclick="highlightRoom('CG112')">CG112</button>
        
        <h3>Offices</h3>
        <button onclick="highlightRoom('Admission Office')">Admission Office</button>
        <button onclick="highlightRoom('Principal Office')">Principal Office</button>
        <button onclick="highlightRoom('Secretary Office')">Secretary Office</button>
        
        <h3>Labs</h3>
        <button onclick="highlightRoom('Lab 1')">Lab 1</button>
        <button onclick="highlightRoom('Lab 2')">Lab 2</button>
        
        <h3>Others</h3>
        <button onclick="highlightRoom('Library')">Library</button>
        <button onclick="highlightRoom('Food Court')">Food Court</button>
    </div>

    <!-- Floor Buttons -->
    <div class="floor-buttons">
        <button onclick="switchFloor(1)">Floor 1</button>
        <button onclick="switchFloor(2)">Floor 2</button>
    </div>

    <div id="map"></div>

    <!-- Chatbot -->
    <div class="chat-container" id="chat-container">
        <div class="chat-header" onclick="toggleChat()">Campus Chatbot</div>
        <div class="chat-messages" id="chat-messages"></div>
        <div class="chat-input">
            <input type="text" id="chat-input" placeholder="Ask me something..." onkeypress="handleKeyPress(event)">
            <button id="send-button" onclick="sendMessage()">Send</button>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        var map = L.map('map', { minZoom: -2, maxZoom: 4, crs: L.CRS.Simple });
        var icon = L.icon({ iconUrl: 'ok.png', iconSize: [20, 20] });

        var floors = {
            1: { image: 'floor1.png', bounds: [[0, 0], [302, 754]], markers: [
                { name: "Food Court 1", coords: [214.83, 717.00] },
                { name: "Food Court 2", coords: [66.75, 717.00] },
                { name: "Auditorium 1", coords: [250.85, 601.00] },
                { name: "Auditorium 2", coords: [54.75, 601.00] },
                { name: "Seminar Hall", coords: [154.80, 610.00] },
                { name: "Hostelers Mess", coords: [111.78, 603.00] },
                { name: "Mess", coords: [190.82, 603.00] },
                { name: "Lab 4", coords: [201.83, 514.00] },
                { name: "Lab 3", coords: [102.77, 512.00] },
                { name: "Library", coords: [47.74, 512.00] },
                { name: "NCC", coords: [33.74, 471.00] },
                { name: "OAT", coords: [150.80, 429.00] },
                { name: "Lab 5", coords: [264.86, 482.00] },
                { name: "PEA", coords: [263.86, 385.00] },
                { name: "Stock Room", coords: [264.84, 353.00] },
                { name: "Transport Office", coords: [262.86, 329.00] },
                { name: "Sick Room", coords: [206.83, 351.00] },
                { name: "CG114", coords: [181.82, 355.00] },
                { name: "CG113", coords: [119.78, 354.00] },
                { name: "CG112", coords: [93.77, 354.00] },
                { name: "Lab 1", coords: [38.74, 377.00] },
                { name: "Zig-Zag", coords: [271.87, 263.00] },
                { name: "Boys Restroom", coords: [33.87, 306.50] },
                { name: "Girls Restroom", coords: [35.87, 233.00] },
                { name: "Admission Office", coords: [263.99, 193.00] },
                { name: "Falcon Hall", coords: [264.49, 152.50] },
                { name: "Office", coords: [196.46, 171.00] },
                { name: "Exam Cell", coords: [107.91, 172.50] },
                { name: "Guest Waiting", coords: [33.87, 152.50] },
                { name: "Oasis", coords: [33.87, 65.00] },
                { name: "Placement Waiting Room", coords: [225.98, 24.00] },
                { name: "Master Board Room", coords: [109.41, 16.00] },
                { name: "Oak Leaf", coords: [74.89, 18.00] },
               
                { name: "Principal Office", coords: [36.87, 11.50] },
                { name: "Secretary Office", coords: [34.37, 32.00] }
           
            ]},
            2: { image: 'floor1.png', bounds: [[0, 0], [301,567 ]], markers: [
                { name: "Lab 2", coords: [102.77, 512.00] },
                { name: "Principal Office", coords: [36.87, 11.50] },
                { name: "Admission Office", coords: [263.99, 193.00] }
            ]}
        };

        var currentFloor = 1;
        var imageOverlay, roomMarkers = [];

        function loadFloor(floor) {
            if (imageOverlay) map.removeLayer(imageOverlay);
            roomMarkers.forEach(marker => map.removeLayer(marker));
            roomMarkers = [];

            imageOverlay = L.imageOverlay(floors[floor].image, floors[floor].bounds).addTo(map);
            map.fitBounds(floors[floor].bounds);

            floors[floor].markers.forEach(room => {
                var marker = L.marker(room.coords, { icon }).addTo(map)
                    .bindTooltip(room.name, { permanent: false, direction: 'top' });
                roomMarkers.push(marker);
            });
        }

        function switchFloor(floor) {
            currentFloor = floor;
            loadFloor(floor);
        }

        function highlightRoom(roomName) {
            var room = floors[currentFloor].markers.find(r => r.name === roomName);
            if (room) map.setView(room.coords, 3);
        }

        function toggleMenu() { document.getElementById("menu").classList.toggle("open"); }
        function toggleChat() { document.getElementById("chat-container").style.display ^= "none"; }

        loadFloor(1);
    </script>
</body>
</html>
