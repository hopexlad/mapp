<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Campus Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        #map {
            width: 100vw;
            height: 100vh;
        }

        /* UI Elements */
        .ui-container {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1001;
        }

        .button {
            padding: 12px;
            width: 140px;
            text-align: center;
            background: #2c7a2c;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            font-size: 16px;
            transition: 0.3s;
        }

        .button:hover {
            background: #1e5b1e;
        }

        /* Search Bar */
        .search-container {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1002;
            background: rgba(255, 255, 255, 0.9);
            padding: 8px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        #search-input {
            width: 220px;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 14px;
        }

        #search-button {
            margin-left: 5px;
            padding: 8px 12px;
            border: none;
            background: #2c7a2c;
            color: white;
            cursor: pointer;
            border-radius: 5px;
            font-size: 14px;
            transition: 0.3s;
        }

        #search-button:hover {
            background: #1e5b1e;
        }
    </style>
</head>
<body>

    <!-- Search Bar -->
    <div class="search-container">
        <input type="text" id="search-input" placeholder="Search rooms..." />
        <button id="search-button">Search</button>
    </div>

    <!-- UI Buttons -->
    <div class="ui-container">
        <button class="button" onclick="switchFloor(1)">Ground Floor</button>
        <button class="button" onclick="switchFloor(2)">1st Floor</button>
    </div>

    <div id="map"></div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        var map = L.map('map', { minZoom: -2, maxZoom: 4, crs: L.CRS.Simple });

        // Floor Data
        var floors = {
            1: {
                image: 'campus.png',
                bounds: [[0, 0], [302, 754]],
                markers: [
                     { name: "Food Court 1", coords: [214.83, 717.00] },
                { name: "Food Court 2", coords: [66.75, 717.00] },
                { name: "Auditorium 1", coords: [250.85, 601.00] },
                { name: "Auditorium 2", coords: [54.75, 601.00] },
                { name: "Seminar Hall", coords: [154.80, 610.00] },
                { name: "Hostelers Mess", coords: [111.78, 603.00] },
                { name: "Dining Area", coords: [190.82, 603.00] },
                { name: "Lab 4", coords: [201.83, 514.00] },
                { name: "Lab 3", coords: [102.77, 512.00] },
                { name: "Server Room", coords: [47.74, 512.00] },
                { name: "Lab 2", coords: [33.74, 471.00] },
                { name: "OAT", coords: [150.80, 429.00] },
                { name: "Lab 5", coords: [264.86, 482.00] },
                { name: "Physical Education Room", coords: [263.86, 385.00] },
                { name: "Stock Room", coords: [264.84, 353.00] },
                { name: "Transport Office", coords: [262.86, 329.00] },
                { name: "Sick Room", coords: [206.83, 351.00] },
                { name: "CG114", coords: [181.82, 355.00] },
                { name: "CG113", coords: [119.78, 354.00] },
                { name: "CG112", coords: [93.77, 354.00] },
                { name: "Lab 1", coords: [38.74, 377.00] },
                { name: "Zig-Zag", coords: [271.87, 263.00] },
                { name: "Boys Restroom", coords: [33.87, 306.50] },
                { name: "Girls Restroom", coords: [35.87, 233.00] },
                { name: "Admission Office", coords: [263.99, 193.00] },
                { name: "Falcon Hall", coords: [264.49, 152.50] },
                { name: "Office", coords: [196.46, 171.00] },
                { name: "Exam Cell", coords: [107.91, 172.50] },
                { name: "Guest Waiting Area", coords: [33.87, 152.50] },
                { name: "Oasis", coords: [33.87, 65.00] },
                { name: "Placement Waiting Room", coords: [225.98, 24.00] },
                { name: "Master Board Room", coords: [109.41, 16.00] },
                { name: "Oak Leaf", coords: [74.89, 18.00] },
                { name: "Principal Office", coords: [36.87, 11.50] },
                { name: "Secretary Office", coords: [34.37, 32.00] }
                ]
            },
            2: {
                image: 'floor1.png',
                bounds: [[0, 0], [301, 567]],
                markers: [
                   { name: "BcomPA and (B&I) dep", coords: [264.50, 187.00] },
            { name: "lll(B&I)", coords: [263.50, 139.00] },
            { name: "II(B&I)", coords: [261.75, 70.00] },
            { name: "I(B&I)", coords: [262.75, 42.25] },
            { name: "AF105", coords: [217.75, 15.00] },
            { name: "AF106", coords: [184.50, 15.75] },
            { name: "Admin Office", coords: [97.00, 17.00] },
            { name: "AF108", coords: [34.50, 40.50] },
            { name: "AF109", coords: [33.00, 71.00] },
            { name: "3Bcom.PA", coords: [34.50, 138.50] },
            { name: "AF111", coords: [36.00, 169.25] },
            { name: "Girls Restroom", coords: [21.00, 217.00] },
            { name: "Boys Restroom", coords: [24.00, 309.50] },
            { name: "Lab 10", coords: [37.50, 377.50] },
            { name: "Lab 9", coords: [39.50, 484.50] },
            { name: "Lab 8", coords: [96.50, 514.50] },
            { name: "Lab 7", coords: [160.00, 514.50] },
            { name: "Lab 6", coords: [208.00, 513.50] },
            { name: "CF105", coords: [264.00, 512.50] },
            { name: "CF104", coords: [261.00, 482.50] },
            { name: "CF103", coords: [263.00, 453.50] },
            { name: "SOCS Department", coords: [268.00, 372.00] },
            { name: "IBCA", coords: [26.00, 330.50] },
            { name: "Zigzag", coords: [270.50, 261.00] },
            { name: "AF115", coords: [204.00, 173.50] },
            { name: "AF114", coords: [174.50, 174.50] },
            { name: "AF113", coords: [124.00, 176.00] },
            { name: "AF112", coords: [95.25, 174.00] },
            { name: "CF115", coords: [204.25, 351.75] },
            { name: "CF114", coords: [173.00, 350.75] },
            { name: "CF113", coords: [128.75, 350.75] },
            { name: "CF112", coords: [95.00, 351.00] }
                ]
            }
        };

        var currentFloor = 1;
        var imageOverlay = L.imageOverlay(floors[currentFloor].image, floors[currentFloor].bounds).addTo(map);
        map.fitBounds(floors[currentFloor].bounds);
        var icon = L.icon({ iconUrl: 'ok.png', iconSize: [20, 20] });
        var roomMarkers = [];

        function addMarkers() {
            // Clear existing markers
            roomMarkers.forEach(marker => map.removeLayer(marker));
            roomMarkers = [];

            // Add new markers
            floors[currentFloor].markers.forEach(room => {
                var marker = L.marker(room.coords, { icon }).addTo(map)
                    .bindTooltip(room.name, { permanent: false, direction: 'top' });
                roomMarkers.push(marker);
            });
        }

        function switchFloor(floor) {
            if (floor === currentFloor) return;

            currentFloor = floor;
            map.eachLayer(layer => map.removeLayer(layer));
            imageOverlay = L.imageOverlay(floors[floor].image, floors[floor].bounds).addTo(map);
            map.fitBounds(floors[floor].bounds);
            addMarkers();
        }

        function highlightRoom(room) {
            map.setView(room.coords, 3);
            var marker = L.marker(room.coords, { icon }).addTo(map)
                .bindTooltip(room.name, { permanent: true, direction: 'top' });

            let blinkCount = 0;
            let blinkInterval = setInterval(() => {
                marker.setOpacity(blinkCount % 2 === 0 ? 0.3 : 1);
                blinkCount++;
                if (blinkCount > 5) {
                    clearInterval(blinkInterval);
                    map.removeLayer(marker);
                }
            }, 400);
        }

        function searchRoom() {
            var searchValue = document.getElementById("search-input").value.trim().toLowerCase();
            if (!searchValue) return alert("Please enter a room name!");

            var foundRoom = floors[currentFloor].markers.find(room => room.name.toLowerCase().includes(searchValue));

            if (foundRoom) {
                highlightRoom(foundRoom);
            } else {
                alert("Room not found on this floor!");
            }
        }

        document.getElementById("search-button").addEventListener("click", searchRoom);
        addMarkers();
    </script>
</body>
</html>


